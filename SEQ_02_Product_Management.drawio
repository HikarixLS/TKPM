<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net">
  <diagram name="Product Management Sequence Diagrams" id="product-seq">
    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="2200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="&lt;h1&gt;Product Management Sequence Diagrams&lt;/h1&gt;&lt;p&gt;AppleStore Backend - Quản lý sản phẩm&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=#fff2cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="1520" height="80" as="geometry" />
        </mxCell>
        
        <!-- ==================== VIEW ALL PRODUCTS ==================== -->
        <mxCell id="view-title" value="&lt;h2&gt;1. View All Products (Xem danh sách sản phẩm)&lt;/h2&gt;" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="160" width="1520" height="40" as="geometry" />
        </mxCell>
        
        <!-- Lifelines for View Products -->
        <mxCell id="view-client" value="Client" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="120" y="240" width="100" height="420" as="geometry" />
        </mxCell>
        
        <mxCell id="view-ctrl" value="ProductController" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="340" y="240" width="140" height="420" as="geometry" />
        </mxCell>
        
        <mxCell id="view-svc" value="ProductService" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="600" y="240" width="140" height="420" as="geometry" />
        </mxCell>
        
        <mxCell id="view-repo" value="ProductRepository" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="860" y="240" width="140" height="420" as="geometry" />
        </mxCell>
        
        <mxCell id="view-db" value="MySQL Database" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1120" y="240" width="140" height="420" as="geometry" />
        </mxCell>
        
        <!-- View Products Messages -->
        <mxCell id="view-msg1" value="GET /api/products?page=0&amp;amp;size=20" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="view-client" target="view-ctrl">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="280" y="320" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="view-msg2" value="getAllProducts(pageable)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="view-ctrl" target="view-svc">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="540" y="360" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="view-msg3" value="findAll(pageable)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="view-svc" target="view-repo">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="800" y="400" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="view-msg4" value="SELECT * FROM products LIMIT 20" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="view-repo" target="view-db">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1060" y="440" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="view-msg5" value="Page&lt;Product&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="view-db" target="view-repo">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1060" y="480" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="view-msg6" value="Page&lt;Product&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="view-repo" target="view-svc">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="800" y="520" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="view-msg7" value="Convert to DTOs&amp;#xa;(ModelMapper)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="670" y="550" as="sourcePoint" />
            <mxPoint x="670" y="580" as="targetPoint" />
            <Array as="points">
              <mxPoint x="630" y="550" />
              <mxPoint x="630" y="580" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="view-msg8" value="Page&lt;ProductDTO&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="view-svc" target="view-ctrl">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="540" y="610" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="view-msg9" value="200 OK&amp;#xa;List&amp;lt;ProductDTO&amp;gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="view-ctrl" target="view-client">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="280" y="640" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- ==================== SEARCH PRODUCTS ==================== -->
        <mxCell id="search-title" value="&lt;h2&gt;2. Search Products (Tìm kiếm sản phẩm)&lt;/h2&gt;" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="720" width="1520" height="40" as="geometry" />
        </mxCell>
        
        <!-- Lifelines for Search Products -->
        <mxCell id="search-client" value="Client" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="120" y="800" width="100" height="380" as="geometry" />
        </mxCell>
        
        <mxCell id="search-ctrl" value="ProductController" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="340" y="800" width="140" height="380" as="geometry" />
        </mxCell>
        
        <mxCell id="search-svc" value="ProductService" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="600" y="800" width="140" height="380" as="geometry" />
        </mxCell>
        
        <mxCell id="search-repo" value="ProductRepository" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="860" y="800" width="140" height="380" as="geometry" />
        </mxCell>
        
        <mxCell id="search-db" value="MySQL Database" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1120" y="800" width="140" height="380" as="geometry" />
        </mxCell>
        
        <!-- Search Products Messages -->
        <mxCell id="search-msg1" value="GET /api/products/search?keyword=iPhone" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="search-client" target="search-ctrl">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="280" y="870" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="search-msg2" value="searchProducts(keyword)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="search-ctrl" target="search-svc">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="540" y="900" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="search-msg3" value="findByNameContainingOrDescriptionContaining()" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="search-svc" target="search-repo">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="800" y="930" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="search-msg4" value="SELECT * FROM products&amp;#xa;WHERE name LIKE '%iPhone%'&amp;#xa;OR description LIKE '%iPhone%'" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="search-repo" target="search-db">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1060" y="980" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="search-msg5" value="List&lt;Product&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="search-db" target="search-repo">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1060" y="1020" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="search-msg6" value="List&lt;ProductDTO&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="search-repo" target="search-svc">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="800" y="1060" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="search-msg7" value="List&lt;ProductDTO&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="search-svc" target="search-ctrl">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="540" y="1100" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="search-msg8" value="200 OK&amp;#xa;List&amp;lt;ProductDTO&amp;gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="search-ctrl" target="search-client">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="280" y="1130" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- ==================== CREATE PRODUCT (ADMIN) ==================== -->
        <mxCell id="create-title" value="&lt;h2&gt;3. Create Product - Admin Only (Thêm sản phẩm mới)&lt;/h2&gt;" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="1240" width="1520" height="40" as="geometry" />
        </mxCell>
        
        <!-- Lifelines for Create Product -->
        <mxCell id="create-admin" value="Admin Client" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="80" y="1320" width="120" height="520" as="geometry" />
        </mxCell>
        
        <mxCell id="create-jwt" value="JwtAuthFilter" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="280" y="1320" width="120" height="520" as="geometry" />
        </mxCell>
        
        <mxCell id="create-ctrl" value="ProductController" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="480" y="1320" width="140" height="520" as="geometry" />
        </mxCell>
        
        <mxCell id="create-svc" value="ProductService" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="700" y="1320" width="140" height="520" as="geometry" />
        </mxCell>
        
        <mxCell id="create-cat-repo" value="CategoryRepository" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="920" y="1320" width="140" height="520" as="geometry" />
        </mxCell>
        
        <mxCell id="create-repo" value="ProductRepository" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="1140" y="1320" width="140" height="520" as="geometry" />
        </mxCell>
        
        <mxCell id="create-db" value="MySQL Database" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1360" y="1320" width="140" height="520" as="geometry" />
        </mxCell>
        
        <!-- Create Product Messages -->
        <mxCell id="create-msg1" value="POST /api/products&amp;#xa;Authorization: Bearer &amp;lt;token&amp;gt;&amp;#xa;{name, price, categoryId, ...}" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="create-admin" target="create-jwt">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="230" y="1400" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="create-msg2" value="Validate JWT &amp;amp;&amp;#xa;Check ADMIN role" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="340" y="1440" as="sourcePoint" />
            <mxPoint x="340" y="1480" as="targetPoint" />
            <Array as="points">
              <mxPoint x="300" y="1440" />
              <mxPoint x="300" y="1480" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="create-msg3" value="@PreAuthorize&amp;#xa;passed" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="create-jwt" target="create-ctrl">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="430" y="1510" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="create-msg4" value="createProduct(productDTO)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="create-ctrl" target="create-svc">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="650" y="1540" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="create-msg5" value="findById(categoryId)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="create-svc" target="create-cat-repo">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="870" y="1570" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="create-msg6" value="Category" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="create-cat-repo" target="create-svc">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="870" y="1600" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="create-msg7" value="Create Product entity&amp;#xa;Set category" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="770" y="1630" as="sourcePoint" />
            <mxPoint x="770" y="1670" as="targetPoint" />
            <Array as="points">
              <mxPoint x="730" y="1630" />
              <mxPoint x="730" y="1670" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="create-msg8" value="save(product)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="create-svc" target="create-repo">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1090" y="1700" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="create-msg9" value="INSERT INTO products VALUES..." style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="create-repo" target="create-db">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1310" y="1730" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="create-msg10" value="Product entity" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="create-db" target="create-repo">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1310" y="1760" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="create-msg11" value="Product entity" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="create-repo" target="create-svc">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1090" y="1790" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="create-msg12" value="ProductDTO" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="create-svc" target="create-ctrl">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="650" y="1820" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="create-msg13" value="201 Created&amp;#xa;ProductDTO" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="create-ctrl" target="create-admin">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="300" y="1850" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- ==================== UPDATE PRODUCT (ADMIN) ==================== -->
        <mxCell id="update-title" value="&lt;h2&gt;4. Update Product - Admin Only (Cập nhật sản phẩm)&lt;/h2&gt;" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="1900" width="1520" height="40" as="geometry" />
        </mxCell>
        
        <!-- Lifelines for Update Product -->
        <mxCell id="update-admin" value="Admin Client" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="120" y="1980" width="120" height="420" as="geometry" />
        </mxCell>
        
        <mxCell id="update-ctrl" value="ProductController" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="340" y="1980" width="140" height="420" as="geometry" />
        </mxCell>
        
        <mxCell id="update-svc" value="ProductService" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="580" y="1980" width="140" height="420" as="geometry" />
        </mxCell>
        
        <mxCell id="update-repo" value="ProductRepository" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="820" y="1980" width="140" height="420" as="geometry" />
        </mxCell>
        
        <mxCell id="update-db" value="MySQL Database" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1060" y="1980" width="140" height="420" as="geometry" />
        </mxCell>
        
        <!-- Update Product Messages -->
        <mxCell id="update-msg1" value="PUT /api/products/{id}&amp;#xa;{name, price, stockQuantity, ...}" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="update-admin" target="update-ctrl">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="270" y="2060" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="update-msg2" value="updateProduct(id, productDTO)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="update-ctrl" target="update-svc">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="520" y="2090" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="update-msg3" value="findById(id)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="update-svc" target="update-repo">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="760" y="2120" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="update-msg4" value="Product entity" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="update-repo" target="update-svc">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="760" y="2150" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="update-msg5" value="Update product fields&amp;#xa;(name, price, stock, etc.)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="650" y="2180" as="sourcePoint" />
            <mxPoint x="650" y="2220" as="targetPoint" />
            <Array as="points">
              <mxPoint x="610" y="2180" />
              <mxPoint x="610" y="2220" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="update-msg6" value="save(product)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="update-svc" target="update-repo">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="760" y="2250" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="update-msg7" value="UPDATE products SET ..." style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="update-repo" target="update-db">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1000" y="2280" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="update-msg8" value="Updated Product" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="update-db" target="update-repo">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1000" y="2310" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="update-msg9" value="Updated Product" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="update-repo" target="update-svc">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="760" y="2340" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="update-msg10" value="ProductDTO" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="update-svc" target="update-ctrl">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="520" y="2370" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="update-msg11" value="200 OK&amp;#xa;ProductDTO" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="update-ctrl" target="update-admin">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="270" y="2400" />
            </Array>
          </mxGeometry>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
