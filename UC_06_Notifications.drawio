<mxfile host="app.diagrams.net">
  <diagram name="Notification System Use Cases" id="notification-uc">
    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="2000" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="ðŸ”” Há»† THá»NG THÃ”NG BÃO (NOTIFICATION SYSTEM)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=28;fontStyle=1;fontColor=#FF6600;" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="1320" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="subtitle" value="3 Use Cases: UC34-UC36 | Observer Pattern Implementation" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=2;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="40" y="90" width="1320" height="30" as="geometry" />
        </mxCell>

        <!-- Observer Pattern Explanation -->
        <mxCell id="observer-note" value="ðŸŽ¯ OBSERVER PATTERN" style="rounded=1;whiteSpace=wrap;html=1;fontSize=18;fontStyle=1;fillColor=#fff2cc;strokeColor=#d6b656;align=center;" vertex="1" parent="1">
          <mxGeometry x="40" y="150" width="1320" height="40" as="geometry" />
        </mxCell>

        <mxCell id="observer-detail" value="&lt;b&gt;ðŸ“ Design Pattern: Observer (Behavioral Pattern)&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;b&gt;Subject (EventPublisher):&lt;/b&gt; Publish events khi cÃ³ sá»± kiá»‡n xáº£y ra (ORDER_CREATED, ORDER_SHIPPED, PRODUCT_OUT_OF_STOCK)&lt;br&gt;&lt;b&gt;Observers:&lt;/b&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;â€¢ EmailNotificationObserver: Gá»­i email thÃ´ng bÃ¡o cho user&lt;br&gt;&amp;nbsp;&amp;nbsp;â€¢ InventoryObserver: Cáº£nh bÃ¡o admin khi sáº£n pháº©m háº¿t hÃ ng&lt;br&gt;&lt;br&gt;&lt;b&gt;âœ… Lá»£i Ã­ch:&lt;/b&gt;&lt;br&gt;â€¢ Loose coupling: Service khÃ´ng cáº§n biáº¿t vá» email/notification logic&lt;br&gt;â€¢ Open/Closed Principle: ThÃªm observer má»›i mÃ  khÃ´ng sá»­a code cÅ©&lt;br&gt;â€¢ Single Responsibility: Má»—i observer cÃ³ trÃ¡ch nhiá»‡m riÃªng&lt;br&gt;â€¢ Extensibility: Dá»… dÃ ng thÃªm SMS, Push Notification, Logging observers&lt;br&gt;&lt;br&gt;&lt;b&gt;ðŸ”— Implementation:&lt;/b&gt; Spring Event System (@EventListener, ApplicationEventPublisher)" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;spacingLeft=15;" vertex="1" parent="1">
          <mxGeometry x="40" y="190" width="1320" height="240" as="geometry" />
        </mxCell>

        <!-- UC34: Gá»­i email xÃ¡c nháº­n Ä‘Æ¡n hÃ ng -->
        <mxCell id="uc34-section" value="UC34: Gá»¬I EMAIL XÃC NHáº¬N ÄÆ N HÃ€NG" style="rounded=1;whiteSpace=wrap;html=1;fontSize=18;fontStyle=1;fillColor=#d5e8d4;strokeColor=#82b366;align=center;" vertex="1" parent="1">
          <mxGeometry x="40" y="460" width="1320" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="uc34-info" value="&lt;table border=&quot;1&quot; width=&quot;100%&quot; cellpadding=&quot;10&quot; style=&quot;border-collapse: collapse; font-size:13px;&quot;&gt;&lt;tr style=&quot;background-color:#f0f0f0;&quot;&gt;&lt;td width=&quot;25%&quot; style=&quot;font-weight:bold;&quot;&gt;Use case name&lt;/td&gt;&lt;td&gt;Gá»­i email xÃ¡c nháº­n Ä‘Æ¡n hÃ ng&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;background-color:#f0f0f0;font-weight:bold;&quot;&gt;Actors&lt;/td&gt;&lt;td&gt;Há»‡ thá»‘ng Email (EmailNotificationObserver)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;background-color:#f0f0f0;font-weight:bold;vertical-align:top;&quot;&gt;Flow&lt;/td&gt;&lt;td style=&quot;text-align:left;&quot;&gt;&lt;b&gt;1.&lt;/b&gt; Event ORDER_CREATED Ä‘Æ°á»£c publish (tá»« OrderService.createOrder())&lt;br&gt;&lt;b&gt;2.&lt;/b&gt; EmailNotificationObserver nháº­n event&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;2.1 Láº¥y thÃ´ng tin order tá»« event data&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;2.2 Láº¥y thÃ´ng tin user (email, name)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;2.3 Táº¡o ná»™i dung email (order number, items, total)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;2.4 Gá»­i email qua SMTP&lt;br&gt;&lt;b&gt;3.&lt;/b&gt; Log káº¿t quáº£ gá»­i email&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;" style="text;html=1;strokeColor=#82b366;fillColor=#d5e8d4;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="40" y="500" width="1320" height="180" as="geometry" />
        </mxCell>

        <mxCell id="uc34-scenarios-title" value="Ká»‹ch báº£n (Scenarios)" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fontStyle=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=center;" vertex="1" parent="1">
          <mxGeometry x="40" y="690" width="1320" height="30" as="geometry" />
        </mxCell>

        <mxCell id="uc34-scenarios" value="&lt;table border=&quot;1&quot; width=&quot;100%&quot; cellpadding=&quot;10&quot; style=&quot;border-collapse: collapse; font-size:13px;&quot;&gt;&lt;tr style=&quot;background-color:#d5e8d4;&quot;&gt;&lt;td width=&quot;30%&quot; style=&quot;font-weight:bold;&quot;&gt;Ká»‹ch báº£n&lt;/td&gt;&lt;td style=&quot;font-weight:bold;&quot;&gt;MÃ´ táº£&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;background-color:#fff2cc;&quot;&gt;&lt;b&gt;Ká»‹ch báº£n 1: Gá»­i email tháº¥t báº¡i&lt;/b&gt;&lt;br&gt;BÆ°á»›c: 2, 2.4&lt;/td&gt;&lt;td&gt;SMTP server lá»—i hoáº·c email khÃ´ng há»£p lá»‡&lt;br&gt;â†’ Log error nhÆ°ng KHÃ”NG áº£nh hÆ°á»Ÿng Ä‘Æ¡n hÃ ng&lt;br&gt;âš ï¸ Email service cháº¡y async, khÃ´ng block transaction&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;background-color:#d5e8d4;&quot;&gt;&lt;b&gt;Ká»‹ch báº£n 2: Gá»­i email thÃ nh cÃ´ng&lt;/b&gt;&lt;br&gt;BÆ°á»›c: 1, 2.1, 2.2, 2.3, 2.4, 3&lt;/td&gt;&lt;td&gt;Email Ä‘Æ°á»£c gá»­i thÃ nh cÃ´ng&lt;br&gt;â†’ User nháº­n email xÃ¡c nháº­n vá»›i thÃ´ng tin Ä‘Æ¡n hÃ ng Ä‘áº§y Ä‘á»§&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;" style="text;html=1;strokeColor=#82b366;fillColor=#d5e8d4;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="40" y="720" width="1320" height="130" as="geometry" />
        </mxCell>

        <!-- UC35: Gá»­i email thÃ´ng bÃ¡o ship hÃ ng -->
        <mxCell id="uc35-section" value="UC35: Gá»¬I EMAIL THÃ”NG BÃO SHIP HÃ€NG" style="rounded=1;whiteSpace=wrap;html=1;fontSize=18;fontStyle=1;fillColor=#d5e8d4;strokeColor=#82b366;align=center;" vertex="1" parent="1">
          <mxGeometry x="40" y="880" width="1320" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="uc35-info" value="&lt;table border=&quot;1&quot; width=&quot;100%&quot; cellpadding=&quot;10&quot; style=&quot;border-collapse: collapse; font-size:13px;&quot;&gt;&lt;tr style=&quot;background-color:#f0f0f0;&quot;&gt;&lt;td width=&quot;25%&quot; style=&quot;font-weight:bold;&quot;&gt;Use case name&lt;/td&gt;&lt;td&gt;Gá»­i email thÃ´ng bÃ¡o ship hÃ ng&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;background-color:#f0f0f0;font-weight:bold;&quot;&gt;Actors&lt;/td&gt;&lt;td&gt;Há»‡ thá»‘ng Email (EmailNotificationObserver)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;background-color:#f0f0f0;font-weight:bold;vertical-align:top;&quot;&gt;Flow&lt;/td&gt;&lt;td style=&quot;text-align:left;&quot;&gt;&lt;b&gt;1.&lt;/b&gt; Event ORDER_SHIPPED Ä‘Æ°á»£c publish (tá»« OrderService.updateOrderStatus())&lt;br&gt;&lt;b&gt;2.&lt;/b&gt; EmailNotificationObserver nháº­n event&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;2.1 Láº¥y thÃ´ng tin order&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;2.2 Láº¥y thÃ´ng tin user&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;2.3 Táº¡o email thÃ´ng bÃ¡o ship hÃ ng (tracking number náº¿u cÃ³)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;2.4 Gá»­i email&lt;br&gt;&lt;b&gt;3.&lt;/b&gt; Log káº¿t quáº£&lt;/td&gt;&lt;/tr&gt;&lt;tr style=&quot;background-color:#d5e8d4;&quot;&gt;&lt;td style=&quot;font-weight:bold;&quot;&gt;Scenarios&lt;/td&gt;&lt;td&gt;â€¢ Gá»­i email tháº¥t báº¡i (log error)&lt;br&gt;â€¢ &lt;b&gt;Gá»­i email thÃ nh cÃ´ng&lt;/b&gt; â†’ User nháº­n thÃ´ng bÃ¡o Ä‘Æ¡n hÃ ng Ä‘ang Ä‘Æ°á»£c ship&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;" style="text;html=1;strokeColor=#82b366;fillColor=#d5e8d4;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="40" y="920" width="1320" height="180" as="geometry" />
        </mxCell>

        <!-- UC36: Cáº£nh bÃ¡o háº¿t hÃ ng tá»“n kho -->
        <mxCell id="uc36-section" value="UC36: Cáº¢NH BÃO Háº¾T HÃ€NG Tá»’N KHO" style="rounded=1;whiteSpace=wrap;html=1;fontSize=18;fontStyle=1;fillColor=#f8cecc;strokeColor=#b85450;align=center;" vertex="1" parent="1">
          <mxGeometry x="40" y="1130" width="1320" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="uc36-info" value="&lt;table border=&quot;1&quot; width=&quot;100%&quot; cellpadding=&quot;10&quot; style=&quot;border-collapse: collapse; font-size:13px;&quot;&gt;&lt;tr style=&quot;background-color:#f0f0f0;&quot;&gt;&lt;td width=&quot;25%&quot; style=&quot;font-weight:bold;&quot;&gt;Use case name&lt;/td&gt;&lt;td&gt;Cáº£nh bÃ¡o háº¿t hÃ ng tá»“n kho&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;background-color:#f0f0f0;font-weight:bold;&quot;&gt;Actors&lt;/td&gt;&lt;td&gt;Há»‡ thá»‘ng Email (InventoryObserver)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;background-color:#f0f0f0;font-weight:bold;vertical-align:top;&quot;&gt;Flow&lt;/td&gt;&lt;td style=&quot;text-align:left;&quot;&gt;&lt;b&gt;1.&lt;/b&gt; Kiá»ƒm tra tá»“n kho sau khi táº¡o Ä‘Æ¡n (OrderService.createOrder())&lt;br&gt;&lt;b&gt;2.&lt;/b&gt; Náº¿u stock_quantity = 0&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;2.1 Publish event PRODUCT_OUT_OF_STOCK&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;2.2 InventoryObserver nháº­n event&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;2.3 Láº¥y thÃ´ng tin sáº£n pháº©m (name, ID, category)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;2.4 Gá»­i email cáº£nh bÃ¡o cho Admin&lt;br&gt;&lt;b&gt;3.&lt;/b&gt; Admin nháº­n thÃ´ng bÃ¡o Ä‘á»ƒ nháº­p thÃªm hÃ ng&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;" style="text;html=1;strokeColor=#b85450;fillColor=#f8cecc;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="40" y="1170" width="1320" height="180" as="geometry" />
        </mxCell>

        <mxCell id="uc36-scenarios-title" value="Ká»‹ch báº£n (Scenarios)" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fontStyle=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=center;" vertex="1" parent="1">
          <mxGeometry x="40" y="1360" width="1320" height="30" as="geometry" />
        </mxCell>

        <mxCell id="uc36-scenarios" value="&lt;table border=&quot;1&quot; width=&quot;100%&quot; cellpadding=&quot;10&quot; style=&quot;border-collapse: collapse; font-size:13px;&quot;&gt;&lt;tr style=&quot;background-color:#d5e8d4;&quot;&gt;&lt;td width=&quot;30%&quot; style=&quot;font-weight:bold;&quot;&gt;Ká»‹ch báº£n&lt;/td&gt;&lt;td style=&quot;font-weight:bold;&quot;&gt;MÃ´ táº£&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;background-color:#fff2cc;&quot;&gt;&lt;b&gt;Ká»‹ch báº£n 1: Tá»“n kho &gt; 0&lt;/b&gt;&lt;br&gt;BÆ°á»›c: 1, 2&lt;/td&gt;&lt;td&gt;Sáº£n pháº©m váº«n cÃ²n hÃ ng&lt;br&gt;â†’ KhÃ´ng gá»­i cáº£nh bÃ¡o&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;background-color:#f8cecc;&quot;&gt;&lt;b&gt;Ká»‹ch báº£n 2: Tá»“n kho = 0&lt;/b&gt;&lt;br&gt;BÆ°á»›c: 1, 2.1, 2.2, 2.3, 2.4, 3&lt;/td&gt;&lt;td&gt;âš ï¸ Sáº£n pháº©m háº¿t hÃ ng&lt;br&gt;â†’ Gá»­i email cáº£nh bÃ¡o cho Admin vá»›i thÃ´ng tin sáº£n pháº©m&lt;br&gt;â†’ Admin cÃ³ thá»ƒ nháº­p thÃªm hÃ ng hoáº·c Ä‘Ã¡nh dáº¥u &quot;out of stock&quot;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;" style="text;html=1;strokeColor=#82b366;fillColor=#d5e8d4;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="40" y="1390" width="1320" height="120" as="geometry" />
        </mxCell>

        <!-- Summary -->
        <mxCell id="summary-section" value="ðŸ“Š Tá»”NG Káº¾T NOTIFICATION SYSTEM" style="rounded=1;whiteSpace=wrap;html=1;fontSize=18;fontStyle=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=center;" vertex="1" parent="1">
          <mxGeometry x="40" y="1540" width="1320" height="40" as="geometry" />
        </mxCell>

        <mxCell id="summary-detail" value="âœ… &lt;b&gt;3 Use Cases (UC34-UC36)&lt;/b&gt; - Táº¥t cáº£ sá»­ dá»¥ng Observer Pattern&lt;br&gt;&lt;br&gt;&lt;b&gt;Observers:&lt;/b&gt;&lt;br&gt;â€¢ &lt;b&gt;EmailNotificationObserver&lt;/b&gt;: UC34 (Order confirmation), UC35 (Shipping notification)&lt;br&gt;â€¢ &lt;b&gt;InventoryObserver&lt;/b&gt;: UC36 (Out of stock alert)&lt;br&gt;&lt;br&gt;&lt;b&gt;Events Published:&lt;/b&gt;&lt;br&gt;â€¢ ORDER_CREATED â†’ UC34&lt;br&gt;â€¢ ORDER_SHIPPED â†’ UC35&lt;br&gt;â€¢ PRODUCT_OUT_OF_STOCK â†’ UC36&lt;br&gt;&lt;br&gt;&lt;b&gt;Benefits:&lt;/b&gt;&lt;br&gt;âœ… Decoupled: Services khÃ´ng phá»¥ thuá»™c vÃ o notification logic&lt;br&gt;âœ… Async: Email gá»­i báº¥t Ä‘á»“ng bá»™, khÃ´ng block main flow&lt;br&gt;âœ… SOLID: Open/Closed Principle, Single Responsibility Principle&lt;br&gt;âœ… Extensible: Dá»… dÃ ng thÃªm SMS, Push Notification, Slack observers&lt;br&gt;&lt;br&gt;ðŸ“„ Xem USE_CASE_SPECIFICATIONS.md vÃ  DESIGN_PATTERNS.md Ä‘á»ƒ cÃ³ chi tiáº¿t Ä‘áº§y Ä‘á»§" style="text;html=1;strokeColor=#6c8ebf;fillColor=#dae8fc;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;spacingLeft=15;" vertex="1" parent="1">
          <mxGeometry x="40" y="1580" width="1320" height="280" as="geometry" />
        </mxCell>

        <!-- Footer -->
        <mxCell id="footer" value="ðŸ“š AppleStore Backend | Notification System Use Cases: UC34-UC36 | 3/3 Complete âœ…" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=2;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="40" y="1890" width="1320" height="30" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>