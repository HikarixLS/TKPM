<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net">
  <diagram name="Authentication Sequence Diagrams" id="auth-seq">
    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="2000" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="&lt;h1&gt;Authentication Sequence Diagrams&lt;/h1&gt;&lt;p&gt;AppleStore Backend - Flow xác thực người dùng&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=#dae8fc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="1520" height="80" as="geometry" />
        </mxCell>
        
        <!-- ==================== USER REGISTRATION ==================== -->
        <mxCell id="reg-title" value="&lt;h2&gt;1. User Registration (Đăng ký tài khoản)&lt;/h2&gt;" style="text;html=1;strokeColor=none;fillColor=#fff2cc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="160" width="1520" height="40" as="geometry" />
        </mxCell>
        
        <!-- Lifelines for Registration -->
        <mxCell id="reg-client" value="Client" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="80" y="240" width="100" height="480" as="geometry" />
        </mxCell>
        
        <mxCell id="reg-auth-ctrl" value="AuthController" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="280" y="240" width="120" height="480" as="geometry" />
        </mxCell>
        
        <mxCell id="reg-user-svc" value="UserService" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="500" y="240" width="120" height="480" as="geometry" />
        </mxCell>
        
        <mxCell id="reg-pwd-encoder" value="PasswordEncoder" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="720" y="240" width="140" height="480" as="geometry" />
        </mxCell>
        
        <mxCell id="reg-user-repo" value="UserRepository" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="960" y="240" width="120" height="480" as="geometry" />
        </mxCell>
        
        <mxCell id="reg-db" value="MySQL Database" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1180" y="240" width="120" height="480" as="geometry" />
        </mxCell>
        
        <!-- Registration Flow Messages -->
        <mxCell id="reg-msg1" value="POST /api/auth/register&#xa;{fullName, email, password, ...}" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=0;entryY=0;" edge="1" parent="1" source="reg-client" target="reg-auth-ctrl">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="185" y="320" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="210" y="320" />
              <mxPoint x="210" y="320" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="reg-msg2" value="registerUser(registrationDTO)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="reg-auth-ctrl" target="reg-user-svc">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="405" y="350" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="430" y="350" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="reg-msg3" value="existsByEmail(email)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="reg-user-svc" target="reg-user-repo">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="625" y="380" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="840" y="380" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="reg-msg4" value="false" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="reg-user-repo" target="reg-user-svc">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="955" y="410" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="840" y="410" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="reg-msg5" value="encode(password)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="reg-user-svc" target="reg-pwd-encoder">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="625" y="440" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="690" y="440" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="reg-msg6" value="encodedPassword" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="reg-pwd-encoder" target="reg-user-svc">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="715" y="470" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="690" y="470" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="reg-msg7" value="save(user)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="reg-user-svc" target="reg-user-repo">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="625" y="500" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="840" y="500" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="reg-msg8" value="INSERT INTO users..." style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="reg-user-repo" target="reg-db">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1085" y="530" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="1140" y="530" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="reg-msg9" value="User entity" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="reg-db" target="reg-user-repo">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1175" y="560" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="1140" y="560" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="reg-msg10" value="User entity" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="reg-user-repo" target="reg-user-svc">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="955" y="590" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="840" y="590" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="reg-msg11" value="UserDTO" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="reg-user-svc" target="reg-auth-ctrl">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="495" y="620" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="430" y="620" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="reg-msg12" value="201 Created&#xa;{id, fullName, email, role, ...}" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="reg-auth-ctrl" target="reg-client">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="275" y="650" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="210" y="650" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- ==================== USER LOGIN ==================== -->
        <mxCell id="login-title" value="&lt;h2&gt;2. User Login (Đăng nhập)&lt;/h2&gt;" style="text;html=1;strokeColor=none;fillColor=#fff2cc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="780" width="1520" height="40" as="geometry" />
        </mxCell>
        
        <!-- Lifelines for Login -->
        <mxCell id="login-client" value="Client" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="80" y="860" width="100" height="580" as="geometry" />
        </mxCell>
        
        <mxCell id="login-auth-ctrl" value="AuthController" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="240" y="860" width="120" height="580" as="geometry" />
        </mxCell>
        
        <mxCell id="login-user-svc" value="UserService" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="440" y="860" width="120" height="580" as="geometry" />
        </mxCell>
        
        <mxCell id="login-auth-mgr" value="AuthenticationManager" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="640" y="860" width="160" height="580" as="geometry" />
        </mxCell>
        
        <mxCell id="login-user-details" value="CustomUserDetailsService" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="880" y="860" width="180" height="580" as="geometry" />
        </mxCell>
        
        <mxCell id="login-user-repo" value="UserRepository" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1140" y="860" width="120" height="580" as="geometry" />
        </mxCell>
        
        <mxCell id="login-jwt" value="JwtTokenProvider" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="1340" y="860" width="140" height="580" as="geometry" />
        </mxCell>
        
        <!-- Login Flow Messages -->
        <mxCell id="login-msg1" value="POST /api/auth/login&#xa;{email, password}" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="login-client" target="login-auth-ctrl">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="185" y="940" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="195" y="940" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="login-msg2" value="loginUser(loginDTO)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="login-auth-ctrl" target="login-user-svc">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="365" y="970" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="390" y="970" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="login-msg3" value="authenticate(email, password)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="login-user-svc" target="login-auth-mgr">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="565" y="1000" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="620" y="1000" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="login-msg4" value="loadUserByUsername(email)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="login-auth-mgr" target="login-user-details">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="805" y="1030" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="860" y="1030" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="login-msg5" value="findByEmail(email)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="login-user-details" target="login-user-repo">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1065" y="1060" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="1120" y="1060" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="login-msg6" value="User entity" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="login-user-repo" target="login-user-details">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1135" y="1090" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="1120" y="1090" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="login-msg7" value="UserPrincipal" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="login-user-details" target="login-auth-mgr">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="875" y="1120" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="860" y="1120" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="login-msg8" value="Compare password&#xa;(PasswordEncoder)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="720" y="1150" as="sourcePoint" />
            <mxPoint x="720" y="1180" as="targetPoint" />
            <Array as="points">
              <mxPoint x="680" y="1150" />
              <mxPoint x="680" y="1180" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="login-msg9" value="Authentication" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="login-auth-mgr" target="login-user-svc">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="635" y="1210" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="620" y="1210" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="login-msg10" value="generateToken(authentication)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="login-user-svc" target="login-jwt">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="565" y="1240" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="950" y="1240" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="login-msg11" value="JWT Token" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="login-jwt" target="login-user-svc">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1335" y="1270" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="950" y="1270" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="login-msg12" value="AuthResponseDTO&#xa;(token + UserDTO)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="login-user-svc" target="login-auth-ctrl">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="435" y="1310" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="390" y="1310" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="login-msg13" value="200 OK&#xa;{token, tokenType, user}" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="login-auth-ctrl" target="login-client">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="235" y="1350" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="195" y="1350" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- ==================== GET CURRENT USER ==================== -->
        <mxCell id="getme-title" value="&lt;h2&gt;3. Get Current User (Lấy thông tin user đang đăng nhập)&lt;/h2&gt;" style="text;html=1;strokeColor=none;fillColor=#fff2cc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="1500" width="1520" height="40" as="geometry" />
        </mxCell>
        
        <!-- Lifelines for Get Current User -->
        <mxCell id="getme-client" value="Client" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="80" y="1580" width="100" height="400" as="geometry" />
        </mxCell>
        
        <mxCell id="getme-auth-ctrl" value="AuthController" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="280" y="1580" width="120" height="400" as="geometry" />
        </mxCell>
        
        <mxCell id="getme-jwt-filter" value="JwtAuthenticationFilter" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="500" y="1580" width="160" height="400" as="geometry" />
        </mxCell>
        
        <mxCell id="getme-jwt-provider" value="JwtTokenProvider" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="760" y="1580" width="140" height="400" as="geometry" />
        </mxCell>
        
        <mxCell id="getme-user-svc" value="UserService" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="1000" y="1580" width="120" height="400" as="geometry" />
        </mxCell>
        
        <mxCell id="getme-user-repo" value="UserRepository" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1220" y="1580" width="120" height="400" as="geometry" />
        </mxCell>
        
        <!-- Get Current User Flow Messages -->
        <mxCell id="getme-msg1" value="GET /api/auth/me&#xa;Authorization: Bearer &lt;token&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="getme-client" target="getme-jwt-filter">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="185" y="1660" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="320" y="1660" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="getme-msg2" value="validateToken(token)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="getme-jwt-filter" target="getme-jwt-provider">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="665" y="1690" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="730" y="1690" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="getme-msg3" value="true" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="getme-jwt-provider" target="getme-jwt-filter">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="755" y="1720" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="730" y="1720" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="getme-msg4" value="getUserIdFromJWT(token)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="getme-jwt-filter" target="getme-jwt-provider">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="665" y="1750" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="730" y="1750" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="getme-msg5" value="userId" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="getme-jwt-provider" target="getme-jwt-filter">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="755" y="1780" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="730" y="1780" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="getme-msg6" value="Set SecurityContext" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="580" y="1810" as="sourcePoint" />
            <mxPoint x="580" y="1840" as="targetPoint" />
            <Array as="points">
              <mxPoint x="540" y="1810" />
              <mxPoint x="540" y="1840" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="getme-msg7" value="proceed to controller" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="getme-jwt-filter" target="getme-auth-ctrl">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="495" y="1870" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="440" y="1870" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="getme-msg8" value="getCurrentUser()" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="getme-auth-ctrl" target="getme-user-svc">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="405" y="1900" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="660" y="1900" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="getme-msg9" value="findById(userId)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" edge="1" parent="1" source="getme-user-svc" target="getme-user-repo">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1125" y="1930" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="1180" y="1930" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="getme-msg10" value="User entity" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="getme-user-repo" target="getme-user-svc">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1215" y="1960" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="1180" y="1960" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="getme-msg11" value="UserDTO" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="getme-user-svc" target="getme-auth-ctrl">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="995" y="1990" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="660" y="1990" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="getme-msg12" value="200 OK&#xa;{id, fullName, email, role, ...}" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;endFill=0;dashed=1;rounded=0;" edge="1" parent="1" source="getme-auth-ctrl" target="getme-client">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="275" y="2020" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="195" y="2020" />
            </Array>
          </mxGeometry>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
